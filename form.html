<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Request</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            cosmic: {
              100: '#e0f2fe',
              200: '#bae6fd',
              300: '#7dd3fc',
              400: '#38bdf8',
              500: '#0ea5e9',
              600: '#0284c7',
              700: '#0369a1',
              800: '#075985',
              900: '#0c4a6e',
            },
            nebula: {
              100: '#f0f9ff',
              200: '#e0f2fe',
              300: '#bae6fd',
              400: '#7dd3fc',
              500: '#38bdf8',
              600: '#0284c7',
              700: '#0369a1',
              800: '#075985',
              900: '#0c4a6e',
            },
            galaxy: {
              100: '#f5f3ff',
              200: '#ede9fe',
              300: '#ddd6fe',
              400: '#c4b5fd',
              500: '#a78bfa',
              600: '#8b5cf6',
              700: '#7c3aed',
              800: '#6d28d9',
              900: '#5b21b6',
            }
          },
          animation: {
            'float': 'float 6s ease-in-out infinite',
            'float-reverse': 'float-reverse 7s ease-in-out infinite',
            'pulse-slow': 'pulse 5s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            'spin-slow': 'spin 8s linear infinite',
          },
          keyframes: {
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-20px)' },
            },
            'float-reverse': {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(20px)' },
            }
          }
        }
      }
    }
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    
    body {
      font-family: 'Poppins', sans-serif;
      background: radial-gradient(circle at 10% 20%, rgba(2, 132, 199, 0.2) 0%, rgba(12, 74, 110, 0.8) 90%);
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    .glass-card {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid rgba(255, 255, 255, 0.18);
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    }
    
    .gradient-text {
      background: linear-gradient(90deg, #38bdf8 0%, #a78bfa 50%, #f472b6 100%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    
    .gradient-border {
      position: relative;
    }
    
    .gradient-border::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 1rem;
      padding: 2px;
      background: linear-gradient(45deg, #38bdf8, #a78bfa, #f472b6);
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none;
    }
    
    .textarea-glow:focus {
      box-shadow: 0 0 15px rgba(56, 189, 248, 0.5);
    }
    
    .btn-hover-grow {
      transition: all 0.3s ease;
    }
    
    .btn-hover-grow:hover {
      transform: translateY(-3px) scale(1.02);
    }
    
    .btn-hover-grow:active {
      transform: translateY(1px);
    }
    
    .particle {
      position: absolute;
      border-radius: 50%;
      pointer-events: none;
      z-index: -1;
    }
    
    @keyframes dots {
      0%, 20% { 
        opacity: 1;
      }
      40% { 
        opacity: 1;
      }
      60% { 
        opacity: 1;
      }
      80%, 100% { 
        opacity: 1;
      }
    }
    
    .loading-dots::after {
      content: "";
      animation: loading-dots 1.5s infinite;
    }
    
    @keyframes loading-dots {
      0%, 20% { content: ""; }
      40% { content: "."; }
      60% { content: ".."; }
      80%, 100% { content: "..."; }
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease-in-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .slide-in {
      animation: slideIn 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
    }
    
    @keyframes slideIn {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .spinning-border {
      background: conic-gradient(from 0deg, #38bdf8, #a78bfa, #f472b6, #38bdf8);
      animation: spin-slow 8s linear infinite;
    }
  </style>
</head>
<body class="flex items-center justify-center p-4">
  <!-- Floating particles -->
  <div class="particle w-4 h-4 bg-cyan-300 opacity-20 animate-float" style="top: 25%; left: 25%;"></div>
  <div class="particle w-6 h-6 bg-purple-400 opacity-15 animate-float-reverse" style="top: 33%; right: 20%;"></div>
  <div class="particle w-3 h-3 bg-pink-400 opacity-25 animate-float" style="bottom: 25%; left: 33%;"></div>
  <div class="particle w-5 h-5 bg-blue-400 opacity-20 animate-float-reverse" style="bottom: 33%; right: 25%;"></div>
  
  <div class="relative w-full max-w-2xl">
    <!-- Decorative elements -->
    <div class="absolute -top-20 -left-20 w-40 h-40 rounded-full bg-cyan-500 opacity-10 blur-3xl"></div>
    <div class="absolute -bottom-20 -right-20 w-40 h-40 rounded-full bg-purple-500 opacity-10 blur-3xl"></div>
    
    <div class="glass-card rounded-2xl p-8 md:p-10 relative overflow-hidden">
      <!-- Animated gradient border -->
      <div class="absolute inset-0 rounded-2xl overflow-hidden pointer-events-none">
        <div class="absolute -inset-1 opacity-30">
          <div class="w-full h-full spinning-border rounded-2xl"></div>
        </div>
      </div>
      
      <div class="relative z-10">
        <!-- Header with animated avatar -->
        <div class="flex flex-col items-center mb-8 slide-in" style="animation-delay: 0.1s;">
          <div class="relative mb-6">
            <div class="w-24 h-24 rounded-full overflow-hidden shadow-lg border-4 border-white">
              <img src="https://files.catbox.moe/nqddif.png" alt="Foto Profil" class="w-full h-full object-cover" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTYiIGhlaWdodD0iOTYiIHZpZXdCb3g9IjAgMCA5NiA5NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iNDgiIGN5PSI0OCIgcj0iNDgiIGZpbGw9IiMzOGJkZjgiLz4KPHN2ZyB4PSIyNCIgeT0iMjQiIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CjxwYXRoIGQ9Im0yMCAxNi02LTQgNi00Ii8+CjxwYXRoIGQ9Im00IDEyIDYtNCA2IDQiLz4KPHN2Zz4KPC9zdmc+Cg=='" />
            </div>
            <div class="absolute -bottom-2 -right-2 w-8 h-8 rounded-full bg-green-400 border-4 border-white flex items-center justify-center">
              <i class="fas fa-check text-white text-xs"></i>
            </div>
          </div>
          
          <h1 class="text-4xl font-bold text-center mb-2 gradient-text">𝐍𝐈𝐆𝐇𝐓𝐂𝐎𝐃𝐄</h1>
          <p class="text-gray-300 text-center max-w-md">Kirimkan permintaan Anda dan kami akan merespons secepat mungkin</p>
        </div>
        
        <!-- Form -->
        <form id="requestForm" class="space-y-6">
          <div class="space-y-2 slide-in" style="animation-delay: 0.2s;">
            <label for="pesan" class="block text-sm font-medium text-gray-300">Pesan Anda</label>
            <div class="gradient-border rounded-xl">
              <textarea 
                id="pesan" 
                name="pesan" 
                rows="5" 
                class="w-full px-4 py-3 bg-gray-900 bg-opacity-50 rounded-xl text-gray-200 placeholder-gray-400 border-none focus:ring-2 focus:ring-cyan-500 textarea-glow transition-all duration-300 resize-vertical"
                placeholder="Tulis pesan detail Anda di sini..."
                required
                maxlength="1000"
              ></textarea>
            </div>
            <div class="text-right text-xs text-gray-400">
              <span id="charCount">0</span>/1000 karakter
            </div>
          </div>
          
          <div class="slide-in" style="animation-delay: 0.3s;">
            <button 
              type="submit" 
              id="submitBtn"
              class="w-full py-4 px-6 bg-gradient-to-r from-cyan-600 to-purple-600 hover:from-cyan-500 hover:to-purple-500 text-white font-semibold rounded-xl shadow-lg btn-hover-grow transition-all duration-300 flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"
            >
              <span id="buttonText">Kirim Pesan</span>
              <i class="fas fa-paper-plane" id="buttonIcon"></i>
            </button>
          </div>
          
          <!-- Status messages -->
          <div id="alertSuccess" class="hidden p-4 bg-green-500 bg-opacity-20 border border-green-400 text-green-200 rounded-xl fade-in">
            <div class="flex items-center space-x-3">
              <i class="fas fa-check-circle text-xl"></i>
              <div>
                <p class="font-semibold">Permintaan Terkirim!</p>
                <p class="text-sm opacity-80">Kami akan segera merespons permintaan Anda.</p>
              </div>
            </div>
          </div>
          
          <div id="alertError" class="hidden p-4 bg-red-500 bg-opacity-20 border border-red-400 text-red-200 rounded-xl fade-in">
            <div class="flex items-center space-x-3">
              <i class="fas fa-exclamation-circle text-xl"></i>
              <div>
                <p class="font-semibold">Gagal Mengirim</p>
                <p class="text-sm opacity-80">Silakan coba lagi atau hubungi kami melalui saluran lain.</p>
              </div>
            </div>
          </div>
        </form>
        
        <!-- Footer -->
        <div class="mt-8 pt-6 border-t border-gray-800 text-center text-gray-400 text-sm slide-in" style="animation-delay: 0.4s;">
          <p>Butuh bantuan segera? <a href="#" class="text-cyan-400 hover:text-cyan-300 transition-colors">Hubungi admin</a></p>
          <div class="flex justify-center space-x-4 mt-4">
            <a href="#" class="text-gray-400 hover:text-white transition-colors" aria-label="WhatsApp">
              <i class="fab fa-whatsapp text-lg"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Initialize floating particles
    document.addEventListener('DOMContentLoaded', () => {
      // Create additional floating particles
      for (let i = 0; i < 8; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle rounded-full absolute';
        
        const size = Math.random() * 6 + 2;
        const colors = ['bg-cyan-300', 'bg-purple-400', 'bg-pink-400', 'bg-blue-400'];
        const color = colors[Math.floor(Math.random() * colors.length)];
        const opacity = Math.random() * 0.2 + 0.05;
        const top = Math.random() * 100;
        const left = Math.random() * 100;
        const animation = Math.random() > 0.5 ? 'animate-float' : 'animate-float-reverse';
        const duration = Math.random() * 5 + 5;
        
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.classList.add(color);
        particle.style.opacity = opacity;
        particle.style.top = `${top}%`;
        particle.style.left = `${left}%`;
        particle.classList.add(animation);
        particle.style.animationDuration = `${duration}s`;
        
        document.body.appendChild(particle);
      }

      // Character counter
      const textarea = document.getElementById('pesan');
      const charCount = document.getElementById('charCount');
      
      textarea.addEventListener('input', function() {
        const currentLength = this.value.length;
        charCount.textContent = currentLength;
        
        if (currentLength > 900) {
          charCount.classList.add('text-red-400');
        } else if (currentLength > 800) {
          charCount.classList.add('text-yellow-400');
          charCount.classList.remove('text-red-400');
        } else {
          charCount.classList.remove('text-red-400', 'text-yellow-400');
        }
      });
    });

    // Form submission handler
    document.getElementById("requestForm").addEventListener("submit", async function (e) {
      e.preventDefault();
      
      const pesan = document.getElementById("pesan").value.trim();
      
      if (!pesan) {
        showAlert('error', 'Pesan tidak boleh kosong!');
        return;
      }

      const waktu = new Date().toLocaleString('id-ID', {
        year: 'numeric',
        month: '2-digit',
        day: '2-digit',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      });

      const submitBtn = document.getElementById("submitBtn");
      const buttonText = document.getElementById("buttonText");
      const buttonIcon = document.getElementById("buttonIcon");
      
      // Hide alerts
      hideAlerts();
      
      // Set loading state
      setLoadingState(true);
      
      try {
        // Simulate API call delay
        await new Promise(resolve => setTimeout(resolve, 1500));
        
        // Make actual API call
        const response = await fetch("/api/request", {
          method: "POST",
          headers: { 
            "Content-Type": "application/x-www-form-urlencoded",
          },
          body: new URLSearchParams({ pesan, waktu })
        });
        
        if (response.ok) {
          showAlert('success');
          document.getElementById("requestForm").reset();
          document.getElementById('charCount').textContent = '0';
          
          // Auto-hide success message after 5 seconds
          setTimeout(() => {
            hideAlerts();
          }, 5000);
        } else {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
      } catch (error) {
        console.error('Error submitting form:', error);
        showAlert('error', 'Terjadi kesalahan saat mengirim pesan. Silakan coba lagi.');
        
        // Auto-hide error message after 5 seconds
        setTimeout(() => {
          hideAlerts();
        }, 5000);
      } finally {
        setLoadingState(false);
      }
    });

    function setLoadingState(isLoading) {
      const submitBtn = document.getElementById("submitBtn");
      const buttonText = document.getElementById("buttonText");
      const buttonIcon = document.getElementById("buttonIcon");
      
      if (isLoading) {
        submitBtn.disabled = true;
        buttonText.textContent = "Mengirim";
        buttonText.classList.add("loading-dots");
        buttonIcon.className = "fas fa-spinner fa-spin";
      } else {
        submitBtn.disabled = false;
        buttonText.textContent = "Kirim Pesan";
        buttonText.classList.remove("loading-dots");
        buttonIcon.className = "fas fa-paper-plane";
      }
    }

    function showAlert(type, customMessage = null) {
      const alertSuccess = document.getElementById("alertSuccess");
      const alertError = document.getElementById("alertError");
      
      if (type === 'success') {
        alertSuccess.classList.remove('hidden');
        alertSuccess.classList.add('fade-in');
      } else if (type === 'error') {
        if (customMessage) {
          const errorText = alertError.querySelector('p:last-child');
          errorText.textContent = customMessage;
        }
        alertError.classList.remove('hidden');
        alertError.classList.add('fade-in');
      }
    }

    function hideAlerts() {
      const alertSuccess = document.getElementById("alertSuccess");
      const alertError = document.getElementById("alertError");
      
      alertSuccess.classList.add('hidden');
      alertError.classList.add('hidden');
    }
  </script>
</body>
</html>
